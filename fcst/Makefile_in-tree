ifneq ($(and $(KBUILD_EXTMOD),$(if $(findstring $(abspath $(srctree)),$(abspath $(KBUILD_EXTMOD))),,true)),)
-include $(KBUILD_EXTMOD)/../build_mode

echo := $(shell echo "fcst build mode: $(BUILD_MODE)" >& 2)

BUILD_MODE_CFLAGS_ = -DDEBUG_WORK_IN_THREAD -DCONFIG_SCST_TRACING	\
	-DCONFIG_SCST_DEBUG -DCONFIG_SCST_EXTRACHECKS			\
	-fno-inline -fno-inline-functions
BUILD_MODE_CFLAGS_RELEASE = -DCONFIG_SCST_TRACING
BUILD_MODE_CFLAGS_PERF =
ccflags-y += -I$(KBUILD_EXTMOD)/../scst/include
ccflags-y += $(BUILD_MODE_CFLAGS_$(BUILD_MODE))
endif

obj-$(CONFIG_FCST) += fcst.o

fcst-objs := \
	ft_cmd.o \
	ft_io.o \
	ft_scst.o \
	ft_sess.o
